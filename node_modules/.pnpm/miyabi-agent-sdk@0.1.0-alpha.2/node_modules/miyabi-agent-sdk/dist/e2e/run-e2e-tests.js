#!/usr/bin/env node
/**
 * E2E Test Runner
 *
 * Usage:
 *   npm run test:e2e              # Run all scenarios
 *   npm run test:e2e -- --scenario 1  # Run specific scenario
 */
import { E2ETestHarness } from "./E2ETestHarness.js";
import { scenarios } from "./scenarios.js";
async function main() {
    const args = process.argv.slice(2);
    const scenarioIndex = args.indexOf("--scenario");
    const harness = new E2ETestHarness();
    if (scenarioIndex !== -1 && args[scenarioIndex + 1]) {
        // 特定のシナリオのみ実行
        const scenarioId = parseInt(args[scenarioIndex + 1], 10);
        const scenario = scenarios.find((s) => s.id === scenarioId);
        if (!scenario) {
            console.error(`Scenario ${scenarioId} not found`);
            process.exit(1);
        }
        console.log(`Running Scenario ${scenarioId}: ${scenario.name}`);
        const result = await harness.runScenario(scenario);
        process.exit(result.success ? 0 : 1);
    }
    else {
        // 全シナリオ実行
        console.log("Running all E2E test scenarios...\n");
        const results = await harness.runAllScenarios(scenarios);
        const passedCount = results.filter((r) => r.success).length;
        const overallPassed = passedCount >= 5; // 5/6以上で成功
        process.exit(overallPassed ? 0 : 1);
    }
}
main().catch((error) => {
    console.error("Fatal error:", error);
    process.exit(1);
});
//# sourceMappingURL=run-e2e-tests.js.map